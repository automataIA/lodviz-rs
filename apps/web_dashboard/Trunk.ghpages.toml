[build]
# The index HTML file to drive the bundling process.
target = "index.html"
# Enable gh-pages feature so the Leptos Router uses the correct base path.
features = ["gh-pages"]
# Build in release mode for production.
release = true
# The output dir for all final assets (dist will be copied to gh-pages by CI).
dist = "dist"
# The public URL from which assets are to be served (GitHub Pages project page).
public_url = "/lodviz-rs/"
# Whether to include hash values in the output file names.
filehash = true
# Whether to inject scripts (and module preloads) into the finalized output.
inject_scripts = true
# Control minification: minify on release builds.
minify = "on_release"

[[hooks]]
stage = "build"
command = "sh"
command_arguments = [
    "-c",
    "npx @tailwindcss/cli -i style/input.css -o public/tailwind.css",
]

[[hooks]]
stage = "post_build"
command = "sh"
command_arguments = ["-c", "cp public/.nojekyll dist/"]

[watch]
# Paths to watch. The `build.target`'s parent folder is watched by default.
watch = []
# Paths to ignore.
ignore = []

[serve]
# The address to serve on.
addresses = ["127.0.0.1"]
# The port to serve on.
port = 8080
# Open a browser tab once the initial build is complete.
open = false
